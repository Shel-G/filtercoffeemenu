<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å’–å•¡è±†èšåˆä¿¡æ¯</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c;
        }
        .filter-btn.active {
            background-color: #4a5568; /* Tailwind gray-700 */
        }
        .group-card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <div class="container mx-auto p-4">
        <div class="text-center mb-6">
            <h1 class="text-3xl font-bold mb-2">å’–å•¡è±†èšåˆä¿¡æ¯</h1>
            <p class="text-gray-400">ä»¥ä¸‹æ˜¯æŒ‰ä¸åŒç»´åº¦æ•´ç†çš„å’–å•¡è±†æ¦‚è§ˆ</p>
        </div>

        <div id="filter-buttons" class="flex flex-wrap justify-center gap-4 mb-8">
            <button class="filter-btn bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 active" data-filter="country">æŒ‰å›½å®¶</button>
            <button class="filter-btn bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200" data-filter="process">æŒ‰å¤„ç†æ³•</button>
            <button class="filter-btn bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200" data-filter="roaster">æŒ‰çƒ˜ç„™å•†</button>
            <button class="filter-btn bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200" data-filter="variety">æŒ‰è±†ç§</button>
            <button class="filter-btn bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200" data-filter="flavor">æŒ‰é£å‘³</button>
        </div>

        <div id="content-container">
            <!-- Aggregated content will be injected here -->
        </div>
    </div>

    <script>
        const coffeeBeans = [
            { "country_cn": "é©¬æ¥è¥¿äºš", "region": "Johor", "variety": "Peaberry", "roaster": "One Half", "process": "JH æ—¥æ™’ 12å¤©", "flavor": "ç”œèŠï¼Œé¾™çœ¼ï¼Œçº¢æ¯›ä¸¹ï¼Œè²å¿ƒæœï¼Œèå£«", "image_id": 1 },
            { "country_cn": "é©¬æ¥è¥¿äºš", "region": "Johor N26 Lot 1", "variety": "Liberaca", "roaster": "Cloud Catcher Coffee", "process": "åŒæ°§æ—¥æ™’ 26å¤©å‘é…µ", "flavor": "é»‘æ¨±æ¡ƒï¼Œæ³¡æ³¡ç³–ï¼Œçº¢æ£ï¼Œç”œèŠ", "image_id": 2 },
            { "country_cn": "è¨å°”ç“¦å¤š", "region": "Santa Ana", "variety": "Bourbon", "roaster": "VCR Coffee Roasters", "process": "åŒæ°§å¤„ç†", "flavor": "ç™¾é¦™æœï¼Œé»„è‘¡è„å¹²ï¼Œæ", "image_id": 3 },
            { "country_cn": "æ³°å›½", "region": "Hua Chang", "variety": "Catuai, Typica", "roaster": "Curate Coffee Roasters", "process": "æ—¥æ™’é…µæ¯å‘é…µ", "flavor": "æœ—å§†é…’ï¼Œçº¢æ¨±æ¡ƒï¼Œå·§å…‹åŠ›", "image_id": 4 },
            { "country_cn": "æ³°å›½", "region": "Tak", "variety": "Catimor, Catuai, Typica", "roaster": "Lot of Taste", "process": "æ—¥æ™’", "flavor": "æå­ï¼Œè”—ç³–ï¼Œé»‘è‘¡è„å¹²ï¼Œä½™éŸµå›ç”˜", "image_id": 5 },
            { "country_cn": "æ³°å›½", "region": "Tak", "variety": "Catimor, Catuai, Typica", "roaster": "Lot of Taste", "process": "æ—¥æ™’", "flavor": "ç«ç‘°ï¼Œæ ‘è“ï¼Œè¥¿æ¢…ï¼Œè‘¡è„é…’ï¼Œä½™éŸµå›ç”˜", "image_id": 6 },
            { "country_cn": "æ³°å›½", "region": "Mae chaem, Chiang Mai", "variety": "Catimor, Catuai, Typica", "roaster": "Graph Coffee Co.", "process": "ä¼ ç»Ÿæ°´æ´—", "flavor": "çº¢èŒ¶ï¼Œçº¢ç³–ï¼Œå‡¤æ¢¨ï¼Œè èèœœ", "image_id": 7 },
            { "country_cn": "æ³°å›½", "region": "Maejan Tai, Chiang Rai", "variety": "Catimor, Mix", "roaster": "Akha Ama Phrasingh", "process": "æ—¥æ™’", "flavor": "å·§å…‹åŠ›å¸ƒæœ—å°¼ï¼Œè‘¡è„å¹²ï¼Œè‚‰æ¡‚ï¼Œçƒ­çº¢é…’ï¼Œç™¾é¦™æœ", "image_id": 8 },
            { "country_cn": "æ³°å›½", "region": "Doi Chang, Chiang Rai", "variety": "Typica, Catimor, Mix", "roaster": "Akha Ama Phrasingh", "process": "æ°´æ´—", "flavor": "è²é›¾ï¼Œè¥¿ç“œï¼Œæ¨æ¡ƒ", "image_id": 9 },
            { "country_cn": "ç§˜é²", "region": "-", "variety": "Gesha", "roaster": "Fluid", "process": "æ°´æ´—", "flavor": "è‰è“ï¼Œç½å¤´æ¡ƒï¼ŒèŠ±èŒ¶", "image_id": 10 },
            { "country_cn": "å°åº¦å°¼è¥¿äºš", "region": "Kintamani, Bali", "variety": "USDA, Cobra, Kopyol", "roaster": "Tiong Hoe Specialty Coffee", "process": "ä¼ ç»Ÿæ°´æ´—", "flavor": "çº¢ç³–ï¼Œç”˜è”—ï¼Œå¹²æŸ¿å­", "image_id": 11 },
            { "country_cn": "å°¼åŠ æ‹‰ç“œ", "region": "Jinotega", "variety": "Catuai, Parainema", "roaster": "Cloud Catcher Coffee", "process": "æ°´æ´—", "flavor": "è²é›¾ï¼Œæœ¨æ§¿èŠ±ï¼Œèœœæ¡ƒï¼Œæ©™", "image_id": 12 },
            { "country_cn": "åŸƒå¡ä¿„æ¯”äºš", "region": "Gomoro Guji G1", "variety": "-", "roaster": "Artisan Roast Coffee", "process": "-", "flavor": "æ©™æ±ï¼ŒèŠ’æœï¼ŒæŸ æª¬å‘³ç³–æœ", "image_id": 13 },
            { "country_cn": "å¦æ¡‘å°¼äºš", "region": "-", "variety": "Bourbon (N39)", "roaster": "Nylon Coffee Roasters", "process": "æ°´æ´—", "flavor": "å¹²æµ†æœï¼Œé»‘å¸ƒæ—ï¼Œé»‘è‘¡è„", "image_id": 14 }
        ];

        const getImageUrl = (id) => `https://raw.githubusercontent.com/Shel-G/filtercoffeemenu/49472810436c8a88974b8f9884ddcc25f74872c4/${id}.png`;

        const emojiMap = {
            'æŸ‘æ©˜': 'ğŸŠ', 'æ©™': 'ğŸŠ', 'æŸ æª¬': 'ğŸ‹', 'çº¢èŒ¶': 'â˜•ï¸', 'èŠ±èŒ¶': 'ğŸŒ¸',
            'è‰è“': 'ğŸ“', 'è¥¿ç“œ': 'ğŸ‰', 'è‹¹æœ': 'ğŸ', 'èœœæ¡ƒ': 'ğŸ‘', 'æ¨±æ¡ƒ': 'ğŸ’',
            'æ ‘è“': 'ğŸ“', 'æ¨æ¡ƒ': 'â­', 'å‡¤æ¢¨': 'ğŸ', 'è èèœœ': 'ğŸ',
            'è‘¡è„': 'ğŸ‡',
            'èŠ’æœ': 'ğŸ¥­', 
            'å·§å…‹åŠ›': 'ğŸ«', 'å¯å¯': 'ğŸ«', 'çº¢ç³–': 'ğŸŸ¤',
            'è”—ç³–': 'ğŸŸ¤', 'ç”˜è”—': 'ğŸŸ¤',
            'èŠ±é¦™': 'ğŸŒ¸', 'åšæœ': 'ğŸŒ°', 'è‘¡è„é…’': 'ğŸ·', 'æœ¨æ§¿èŠ±': 'ğŸŒ¸',
            'æ³¡æ³¡ç³–': 'ğŸ«§', 'ç½å¤´æ¡ƒ': 'ğŸ‘', 
        };

        const countryFlags = {
            'é©¬æ¥è¥¿äºš': 'ğŸ‡²ğŸ‡¾', 'è¨å°”ç“¦å¤š': 'ğŸ‡¸ğŸ‡»', 'æ³°å›½': 'ğŸ‡¹ğŸ‡­', 'ç§˜é²': 'ğŸ‡µğŸ‡ª',
            'å°åº¦å°¼è¥¿äºš': 'ğŸ‡®ğŸ‡©', 'å°¼åŠ æ‹‰ç“œ': 'ğŸ‡³ğŸ‡®', 'åŸƒå¡ä¿„æ¯”äºš': 'ğŸ‡ªğŸ‡¹', 'å¦æ¡‘å°¼äºš': 'ğŸ‡¹ğŸ‡¿'
        };

        // æ ¹æ®é£å‘³æè¿°ï¼Œå°†å’–å•¡è±†åˆ†ç»„åˆ°ç‰¹å®šçš„é£å‘³ç±»åˆ«ä¸­
        const getFlavorGroups = (beans) => {
            const groups = {
                'æ°´æœé£å‘³': [],
                'åšæœ/å·§å…‹åŠ›é£å‘³': [],
                'èŒ¶/è‰æœ¬é£å‘³': [],
                'ç”œå‘³/å…¶ä»–': []
            };

            const flavorKeywords = {
                'æ°´æœé£å‘³': ['æ©™', 'æŸ æª¬', 'è‰è“', 'è¥¿ç“œ', 'èœœæ¡ƒ', 'é»‘æ¨±æ¡ƒ', 'è²é›¾', 'æ ‘è“', 'æ¨æ¡ƒ', 'å‡¤æ¢¨', 'è èèœœ', 'æå­', 'è¥¿æ¢…', 'è‘¡è„', 'é»‘å¸ƒæ—', 'ç™¾é¦™æœ', 'æ', 'èŠ’æœ', 'ç½å¤´æ¡ƒ', 'çº¢æ¨±æ¡ƒ'],
                'åšæœ/å·§å…‹åŠ›é£å‘³': ['å·§å…‹åŠ›', 'å¯å¯'],
                'èŒ¶/è‰æœ¬é£å‘³': ['çº¢èŒ¶', 'èŠ±èŒ¶', 'ç”œèŠ'],
                'ç”œå‘³/å…¶ä»–': ['çº¢ç³–', 'è”—ç³–', 'ç”˜è”—', 'å¹²æŸ¿å­', 'ä½™éŸµå›ç”˜', 'æ³¡æ³¡ç³–', 'çº¢æ£', 'æœ—å§†é…’', 'è‘¡è„é…’', 'è‚‰æ¡‚', 'ç«ç‘°']
            };

            beans.forEach(bean => {
                for (const group in flavorKeywords) {
                    const hasFlavor = flavorKeywords[group].some(keyword => bean.flavor.includes(keyword));
                    if (hasFlavor) {
                        groups[group].push(bean);
                        break; // æ‰¾åˆ°åŒ¹é…çš„ç»„åå°±è·³å‡º
                    }
                }
            });
            return groups;
        };
        
        // é€šç”¨åˆ†ç»„å‡½æ•°ï¼Œæ ¹æ®ä¼ å…¥çš„å­—æ®µåå¯¹å’–å•¡è±†è¿›è¡Œåˆ†ç»„
        const groupData = (beans, filterBy) => {
            if (filterBy === 'flavor') {
                return getFlavorGroups(beans);
            }
            
            const grouped = {};
            beans.forEach(bean => {
                const key = bean[filterBy === 'country' ? 'country_cn' : filterBy];
                if (!grouped[key]) {
                    grouped[key] = [];
                }
                grouped[key].push(bean);
            });
            return grouped;
        };

        function getFlavorWithEmojis(flavor) {
            let result = flavor;
            for (const key in emojiMap) {
                const emoji = emojiMap[key];
                const regex = new RegExp(key, 'g');
                result = result.replace(regex, `${key}${emoji}`);
            }
            return result;
        }

        function createCard(bean) {
            const flavorHtml = getFlavorWithEmojis(bean.flavor);
            const flag = countryFlags[bean.country_cn] || '';
            const card = `
                <div class="bg-gray-800 rounded-lg shadow-xl overflow-hidden transform transition-transform duration-300 hover:scale-105">
                    <img src="${getImageUrl(bean.image_id)}" alt="${bean.roaster}" class="w-full h-64 object-cover object-center">
                    <div class="p-4">
                        <h3 class="text-xl font-bold mb-2 truncate">${bean.region}</h3>
                        <div class="text-sm space-y-1">
                            <p><span class="font-semibold text-gray-400">å›½å®¶:</span> ${bean.country_cn} ${flag}</p>
                            <p><span class="font-semibold text-gray-400">è±†ç§:</span> ${bean.variety}</p>
                            <p><span class="font-semibold text-gray-400">çƒ˜ç„™å•†:</span> ${bean.roaster}</p>
                            <p><span class="font-semibold text-gray-400">å¤„ç†æ³•:</span> ${bean.process}</p>
                            <p><span class="font-semibold text-gray-400">é£å‘³:</span> ${flavorHtml}</p>
                        </div>
                    </div>
                </div>
            `;
            return card;
        }

        function renderContent(filterBy) {
            const container = document.getElementById('content-container');
            container.innerHTML = '';
            
            const groupedData = groupData(coffeeBeans, filterBy);

            for (const key in groupedData) {
                if (groupedData[key].length > 0) {
                    const groupTitle = document.createElement('h2');
                    groupTitle.className = 'text-2xl font-bold mt-8 mb-4 border-b-2 border-gray-700 pb-2';
                    const flag = countryFlags[key] || '';
                    groupTitle.textContent = `${key} ${flag}`;
                    container.appendChild(groupTitle);

                    const groupGrid = document.createElement('div');
                    groupGrid.className = 'group-card-grid';
                    groupedData[key].forEach(bean => {
                        groupGrid.innerHTML += createCard(bean);
                    });
                    container.appendChild(groupGrid);
                }
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const filterButtons = document.querySelectorAll('.filter-btn');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    const filter = e.target.dataset.filter;
                    renderContent(filter);
                });
            });
            // é¡µé¢åŠ è½½æ—¶é»˜è®¤æŒ‰å›½å®¶ç­›é€‰
            renderContent('country');
        });
    </script>
</body>
</html>

